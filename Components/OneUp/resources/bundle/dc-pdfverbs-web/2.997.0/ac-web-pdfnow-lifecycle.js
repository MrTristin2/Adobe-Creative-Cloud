(window["webpackJsonp-pdfverbs-web"]=window["webpackJsonp-pdfverbs-web"]||[]).push([[11],{HGPo:function(e,t,n){var i=n("LboF"),r=n("jkDw");"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var c={insert:"head",singleton:!1};i(r,c);e.exports=r.locals||{}},aGUp:function(e,t,n){"use strict";n.r(t);var i=n("jQsN"),r=n.n(i),c=n("butC"),o=n.n(c),a=n("q1tI"),s=n.n(a),u=n("eO8H"),l=n("17x9"),f=n.n(l),d=n("+lnk"),b=n("LLoy"),_=n("HGPo"),p=n.n(_),A=n("2YDW"),w=n("pukD"),h=n("YK6h"),x=n("DjBF"),m=n.n(x),g=n("Ea6J"),v=n("hNEK");function _executeActionIfAssetUriPresent(){return(_executeActionIfAssetUriPresent=o()(r.a.mark((function _callee(e){var t,n,i,c,o,a;return r.a.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.executeAction,n=e.initializeAction,i=e.setReady,c=new URLSearchParams(window.location.search),o=c.get("assetUri"),!d.auth2.isSignedIn||!o){r.next=15;break}return r.next=6,Object(g.c)(v.a.LIFECYCLE_SELECTION_NAME);case 6:return r.sent.setPdfnowUris([o]),a=n({context:v.a.LIFECYCLE_CONTEXT,selectionName:v.a.LIFECYCLE_SELECTION_NAME,showCallback:function showCallback(){}}),r.next=11,a;case 11:return r.next=13,t({context:v.a.LIFECYCLE_CONTEXT,executeCallback:function executeCallback(){i(!0)},neverShowProgress:!0,overwriteOnSave:!0,props:{focusOnCreate:!0}});case 13:r.next=16;break;case 15:i(!0);case 16:case"end":return r.stop()}}),_callee)})))).apply(this,arguments)}function useExecuteActionWithAssetUri(e){var t=e.executeAction,n=e.initializeAction,i=Object(a.useState)(!1),r=m()(i,2),c=r[0],o=r[1];return Object(a.useEffect)((function(){!function executeActionIfAssetUriPresent(e){return _executeActionIfAssetUriPresent.apply(this,arguments)}({executeAction:t,initializeAction:n,setReady:o})}),[t,n]),c}function _continueAtConversionIfRequired(){return(_continueAtConversionIfRequired=o()(r.a.mark((function _callee(e){var t,n,i,c,o,a,s,u,l,f,b,_;return r.a.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.setJobContinueAtConversion,n=!1,i=new URLSearchParams(window.location.search),c=i.get("redirect_conversion"),!d.auth2.isSignedIn||!c){r.next=25;break}return r.next=7,d.providers["shared-storage"]();case 7:return o=r.sent,(a=d.router.getURLSearchParams()).delete("redirect_conversion"),s=a.toString(),u=s?"?".concat(s):"",d.router.history.replace("".concat(window.location.pathname).concat(u)),r.next=15,o.getItemRemote("redirectJob",!0);case 15:if(l=r.sent,!(f=JSON.parse(l))){r.next=25;break}return r.next=20,d.providers["lifecycle-progress"]();case 20:b=r.sent,_=b.addJob(f),f.jobId=_.jobId,b.focusJob(f.jobId),n=!0;case 25:t(n);case 26:case"end":return r.stop()}}),_callee)})))).apply(this,arguments)}function useJobContinueAtConversion(){var e=Object(a.useState)(null),t=m()(e,2),n=t[0],i=t[1];return Object(a.useEffect)((function(){!function continueAtConversionIfRequired(e){return _continueAtConversionIfRequired.apply(this,arguments)}({setJobContinueAtConversion:i})}),[]),n}function _jobContinueAtFilesIfRequired(){return(_jobContinueAtFilesIfRequired=o()(r.a.mark((function _callee(e){var t,n,i,c,o,a,s,u,l;return r.a.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.setJobContinueAtFiles,n=!1,i=new URLSearchParams(window.location.search),c=i.get("redirect_files"),!d.auth2.isSignedIn||!c){r.next=19;break}return r.next=7,d.providers["shared-storage"]();case 7:return o=r.sent,r.next=10,o.getItemRemote("redirectFiles",!0);case 10:if(a=r.sent,!(s=JSON.parse(a))){r.next=19;break}return r.next=15,d.providers.selection();case 15:u=r.sent,l=u.registerSelection(v.a.LIFECYCLE_SELECTION_NAME),s.forEach((function(e){l.selectItem(e.id,e.metadata)})),n=!0;case 19:t(n);case 20:case"end":return r.stop()}}),_callee)})))).apply(this,arguments)}function useJobContinueAtFiles(){var e=Object(a.useState)(null),t=m()(e,2),n=t[0],i=t[1];return Object(a.useEffect)((function(){!function jobContinueAtFilesIfRequired(e){return _jobContinueAtFilesIfRequired.apply(this,arguments)}({setJobContinueAtFiles:i})})),n}var C="/build/src/dropins/AcWebPdfnowLifecycle/AcWebPdfnowLifecycle.jsx",I=/(\/link\/acrobat\/)([^/]*)/,E=function AcWebPdfnowLifecycle(e){var t=e.focusedJobId,n=e.jobStage,i=e.executeAction,c=e.initializeAction,a=e.location,u=p.a.widgetDropZone;t&&n!==w.a.DROPZONE&&(u=p.a.widgetFullScreen);var l=useExecuteActionWithAssetUri({executeAction:i,initializeAction:c}),f=useJobContinueAtConversion(),_=useJobContinueAtFiles(),A=s.a.useRef(a.pathname);return s.a.useEffect((function(){(function(){var e=o()(r.a.mark((function _callee(e){var t;return r.a.wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:if(I.exec(e).length&&a.pathname!==e){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,d.providers["lifecycle-progress"]();case 5:if((t=n.sent).focusedJobId){n.next=8;break}return n.abrupt("return");case 8:t.deFocusJob(t.focusedJobId);case 9:case"end":return n.stop()}}),_callee)})));return function defocusJob(t){return e.apply(this,arguments)}})()(A.current),A.current=a.pathname}),[a.pathname]),s.a.createElement("div",{className:p.a.fullScreenHost,__self:void 0,__source:{fileName:C,lineNumber:76,columnNumber:5}},s.a.createElement("article",{className:u,__self:void 0,__source:{fileName:C,lineNumber:77,columnNumber:7}},l&&null!==f&&null!==_&&s.a.createElement(b.a,Object.assign({id:"pdfnow-lifecycle"},e,{jobContinueAtConversion:f,jobContinueAtFiles:_,__self:void 0,__source:{fileName:C,lineNumber:78,columnNumber:89}}))))};E.propTypes={focusedJobId:f.a.string.isRequired,jobStage:f.a.string.isRequired,executeAction:f.a.func,location:f.a.shape({pathname:f.a.string.isRequired,search:f.a.string.isRequired}).isRequired,initializeAction:f.a.func},E.defaultProps={executeAction:function executeAction(){},initializeAction:function initializeAction(){}},E.isLifecycle=!0;var L=Object(u.withRouter)(E),S=Object(h.a)([],["executeAction","initializeAction"])(L),y=Object(A.a)()(S);t.default=y},eO8H:function(e,t,n){e.exports=n("1Xvy")("F8kA")},jkDw:function(e,t,n){(t=n("JPst")(!1)).push([e.i,".AcWebPdfnowLifecycle__fullScreenHost___N8HGA{display:flex;flex-direction:row;height:100%;width:100%}.AcWebPdfnowLifecycle__widgetDropZone___3lUKr{align-self:center;flex-basis:1000px;height:400px;margin:0 auto;max-width:1000px;min-height:400px}.AcWebPdfnowLifecycle__widgetFullScreen___FmWsI{align-self:center;flex-basis:100%;height:100%;margin:0 auto;width:100%}@media (min-width:295px) and (max-width:767px){.AcWebPdfnowLifecycle__widgetFullScreen___FmWsI{align-self:auto;flex-basis:auto;height:auto}}",""]),t.locals={fullScreenHost:"AcWebPdfnowLifecycle__fullScreenHost___N8HGA",widgetDropZone:"AcWebPdfnowLifecycle__widgetDropZone___3lUKr",widgetFullScreen:"AcWebPdfnowLifecycle__widgetFullScreen___FmWsI"},e.exports=t}}]);
