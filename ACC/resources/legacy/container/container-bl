!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=6)}([function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(o=a.key,i=void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(i)?i:String(i)),a)}var o,i}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"_preprocess",value:function(e){for(var t=0;t<e.length;++t)"string"==typeof e[t]&&e[t].length>10512&&(e[t]=e[t].substring(0,10512)+".....<Truncated>")}},{key:"getStringFromArgs",value:function(e){for(var t="",r=0;r<e.length;r++)"string"==typeof e[r]?t+=e[r]:e[r]&&(t+=JSON.stringify(e[r]));return t}},{key:"error",value:function(){if(!window.logLevel||0!==window.logLevel){var e=Array.prototype.slice.call(arguments);console.error.apply(console,e);try{window.JSObject?window.JSObject.logError(this.getStringFromArgs(e)):window.app&&window.app.logMessage&&window.app.logMessage(["ERROR",this.getStringFromArgs(e)])}catch(e){}}}},{key:"warn",value:function(){if(window.logLevel&&window.logLevel>=2){var e=Array.prototype.slice.call(arguments);console.warn.apply(console,e);try{window.JSObject?window.JSObject.logWarn(this.getStringFromArgs(e)):window.app&&window.app.logMessage&&window.app.logMessage(["WARN",this.getStringFromArgs(e)])}catch(e){}}}},{key:"log",value:function(){if(window.logLevel&&window.logLevel>=3){var e=Array.prototype.slice.call(arguments);this._preprocess(e),console.trace&&console.trace.apply(console,e);try{window.JSObject?window.JSObject.logInfo(this.getStringFromArgs(e)):window.app&&window.app.logMessage&&window.app.logMessage(["LOG",this.getStringFromArgs(e)])}catch(e){}}}},{key:"info",value:function(){if(window.logLevel&&window.logLevel>=3){var e=Array.prototype.slice.call(arguments);this._preprocess(e),console.trace&&console.trace.apply(console,e);try{window.JSObject?window.JSObject.logInfo(this.getStringFromArgs(e)):window.app&&window.app.logMessage&&window.app.logMessage(["INFO",this.getStringFromArgs(e)])}catch(e){}}}},{key:"debug",value:function(){if(window.logLevel&&window.logLevel>=4){var e=Array.prototype.slice.call(arguments);this._preprocess(e),console.trace&&console.trace.apply(console,e);try{window.JSObject?window.JSObject.logDebug(this.getStringFromArgs(e)):window.app&&window.app.logMessage&&window.app.logMessage(["DEBUG",this.getStringFromArgs(e)])}catch(e){}}}},{key:"trace",value:function(){if(window.logLevel&&window.logLevel>=5){var e=Array.prototype.slice.call(arguments);this._preprocess(e),console.trace&&console.trace.apply(console,e);try{window.JSObject?window.JSObject.logTrace(this.getStringFromArgs(e)):window.app&&window.app.logMessage&&window.app.logMessage(["TRACE",this.getStringFromArgs(e)])}catch(e){}}}}])&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=new o},function(e,t,r){"use strict";r.d(t,"a",function(){return l});var n=r(0),a=r(2);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,o=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===i(o)?o:String(o)),n)}var a,o}var l=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.panelList=[],this.panelListJSON=[],this.otherListJSON={},this.signInStatus=!1,this.ExternalGateway=null,this.fesConfigMap=new Map,this._userProfile={},this._namespacePropertyMap=new Map,this._redirectionUrlMap=new Map,this._localPanelsData=[],this._localOthesData={}}var t,r,l;return t=e,(r=[{key:"initialize",value:function(e,t){if(this.ExternalGateway=t,this._localPanelsData=e.initJSON.panels,this._localOthesData={containers:[],hosts:[],cores:[],coreExtensionList:[]},e.initJSON.containers&&Array.isArray(e.initJSON.containers)&&e.initJSON.containers.length>0&&(this._localOthesData.containers=e.initJSON.containers),e.initJSON.hosts&&Array.isArray(e.initJSON.hosts)&&e.initJSON.hosts.length>0&&(this._localOthesData.hosts=e.initJSON.hosts),e.initJSON.cores&&Array.isArray(e.initJSON.cores)&&e.initJSON.cores.length>0&&(this._localOthesData.cores=e.initJSON.cores),e.initJSON.coreExtensionList&&Array.isArray(e.initJSON.coreExtensionList)&&e.initJSON.coreExtensionList.length>0)for(var r=0;r<e.initJSON.coreExtensionList.length;++r)"ADS"!=e.initJSON.coreExtensionList[r].mode&&"ALL"!=e.initJSON.coreExtensionList[r].mode||this._localOthesData.coreExtensionList.push(e.initJSON.coreExtensionList[r]);this.containerAPSConfigData=e.initJSON.apsConfig}},{key:"initializeConfigData",value:function(e){a.a.parseC3Config(e.C3Config,this._namespacePropertyMap,this._redirectionUrlMap),this._hostInitData=e.hostInitData,this._serviceConfigJSON=e.config;var t,r=[],s={containers:[],hosts:[],cores:[],coreExtensionList:[]},l=!1;e.profileData;try{if(e.serverPanelsData){var c=JSON.parse(e.serverPanelsData);if(c&&(c.panels&&Array.isArray(c.panels)&&c.panels.length>0&&(r=c.panels),c.containers&&Array.isArray(c.containers)&&c.containers.length>0&&(s.containers=c.containers),c.hosts&&Array.isArray(c.hosts)&&c.hosts.length>0&&(s.hosts=c.hosts),c.cores&&Array.isArray(c.cores)&&c.cores.length>0&&(s.cores=c.cores),c.coreExtensionList&&Array.isArray(c.coreExtensionList)&&c.coreExtensionList.length>0))for(var u=0;u<c.coreExtensionList.length;++u)"ADS"!=c.coreExtensionList[u].mode&&"ALL"!=c.coreExtensionList[u].mode||s.coreExtensionList.push(c.coreExtensionList[u])}}catch(e){n.a.error("JSContainer_BL: ApplicationContext: Exception in ServerData parsing: ".concat(e)),r=[],s={containers:[],hosts:[],cores:[],coreExtensionList:[]}}var f=this.containerAPSConfigData.apsSurfaceList[0];f=f||"ADS";var p=[];try{if(e.apsPanelsData){var d=JSON.parse(e.apsPanelsData);this.apsData=a.a.parseAPSData(d),p=this.apsData[f]?this.apsData[f]:[]}}catch(e){n.a.error("JSContainer_BL: ApplicationContext: Exception in APSData parsing: ".concat(e)),p=[]}var y=[];this._serviceConfigJSON&&this._serviceConfigJSON.panel&&(Array.isArray(this._serviceConfigJSON.panel)?y=this._serviceConfigJSON.panel:"object"===i(this._serviceConfigJSON.panel)&&(y=[this._serviceConfigJSON.panel]));var h=[{panelName:"AppsPanel"},{panelName:"FilesPanel"}];e&&e["feature-response"]&&e["feature-response"]["feature-entry"]&&(t=e["feature-response"]["feature-entry"],t=a.a.toArray(t),a.a.handleFESData(t,this.fesConfigMap)),"false"!=a.a.getFESData(this.fesConfigMap,"ccd.apps.overrideServiceConfig")&&(l=!0);var g={};if(0==this.panelListJSON.length&&0==Object.keys(this.otherListJSON).length)"local"==window.context.browser?(g=a.a.mergePanelsData("ADS",this._localPanelsData,[],p,y,h,l),this.panelListJSON=g.visiblePanels,this.otherListJSON=this._localOthesData):"server"==window.context.browser&&(g=a.a.mergePanelsData("ADS",[],r,p,y,h,l),this.panelListJSON=g.visiblePanels,this.otherListJSON=s),g.shouldReload=null;else if(e.serverPanelsData){g.shouldReload=!1,g=a.a.mergePanelsData("ADS",this._localPanelsData,r,p,y,h,l),a.a.matchPanelsData(this.panelListJSON,g.visiblePanels)?g.shouldReload=!0:g.shouldReload=!1,g.shouldReload=Object.keys(this.otherListJSON).length!=Object.keys(s).length||g.shouldReload,g.shouldReload=!(!s.hosts.length||this.otherListJSON.hosts[0].version==s.hosts[0].version)||g.shouldReload,g.shouldReload=!(!s.cores.length||this.otherListJSON.cores[0].version==s.cores[0].version)||g.shouldReload;for(var v=0;!g.shouldReload&&v<this.otherListJSON.containers.length;++v)for(var b=0;!g.shouldReload&&b<s.containers.length;++b)if("ADS"==this.otherListJSON.containers[v].mode&&"ADS"==s.containers[b].mode){g.shouldReload=this.otherListJSON.containers[v].id!=s.containers[b].id||this.otherListJSON.containers[v].version!=s.containers[b].version||this.otherListJSON.containers[v].packageVersion!=s.containers[b].packageVersion||this.otherListJSON.containers[v].path!=s.containers[b].path||g.shouldReload;break}g.shouldReload=!(!s.coreExtensionList.length||this.otherListJSON.coreExtensionList.length==s.coreExtensionList.length)||g.shouldReload;for(var m=0;!g.shouldReload&&m<this.otherListJSON.coreExtensionList.length;++m){var S=0;for(S=0;!g.shouldReload&&S<s.coreExtensionList.length;++S)if(this.otherListJSON.coreExtensionList[m].id==s.coreExtensionList[S].id){g.shouldReload=this.otherListJSON.coreExtensionList[m].version!=s.coreExtensionList[S].version||this.otherListJSON.coreExtensionList[m].packageVersion!=s.coreExtensionList[S].packageVersion||this.otherListJSON.coreExtensionList[m].path!=s.coreExtensionList[S].path||g.shouldReload;break}if(S>=s.coreExtensionList.length){g.shouldReload=!0;break}}}else g.shouldReload=!1;if(!0===g.shouldReload){g.host=s.hosts[0];for(var w={},O=0;O<s.containers.length;++O)"ADS"==s.containers[O].mode&&(w=s.containers[O]);var P=window.btoa(JSON.stringify(o({},{core:s.cores[0]},{container:w},{coreExtensions:Array.isArray(s.coreExtensionList)?s.coreExtensionList:[]}))),L=s.hosts[0].version;g.host.path="".concat(g.host.path,"?mode=").concat(window.context.mode,"&cc-version=").concat(window.context.ccVersion,"&host-version=").concat(L,"&host-init-data=").concat(P)}return g}},{key:"updateUserProfile",value:function(e){this._userProfile=e}},{key:"getUserProfile",value:function(){return this._userProfile}},{key:"getNamespaceProperty",value:function(e){return a.a.getNamespaceProperty(e,this._namespacePropertyMap)}},{key:"getRedirectedUrl",value:function(e){return a.a.getRedirectedUrl(e,this._redirectionUrlMap)}},{key:"updateARSGuidInUserProfile",value:function(e){this._userProfile.ARSGuid=e.ARSGuid}}])&&s(t.prototype,r),l&&s(t,l),Object.defineProperty(t,"prototype",{writable:!1}),e}())},function(e,t,r){"use strict";r.d(t,"a",function(){return f});var n=r(0);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=s(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}function s(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===c(o)?o:String(o)),n)}var a,o}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,s;return t=e,s=[{key:"getQueryParameterByName",value:function(e,t){var r=document.createElement("a");r.href=e,t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]".concat(t,"=([^&#]*)")).exec(r.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}},{key:"getPanelShortName",value:function(e){var t=e;switch(e){case"AppsPanel":t="Apps";break;case"LearnPanel":t="Learn";break;case"AssetsPanel":t="Assets";break;case"FilesPanel":t="Files";break;case"FontsPanel":t="Fonts";break;case"MarketPanel":t="Market";break;case"StockPanel":t="Stock";break;case"BehancePanel":t="Discover";break;default:t=e}return t}},{key:"parseAPSData",value:function(t){n.a.info("ContainerUtils: parseAPSData(): start");var r={};if(!(t&&"object"===c(t)&&t.cards&&Array.isArray(t.cards)&&t.cardControl&&Array.isArray(t.cardControl)))return r;try{var a,s=i(t.cardControl);try{for(s.s();!(a=s.n()).done;){var l=a.value;r[l.surfaceId]=[];var u,f=i(l.containers);try{for(f.s();!(u=f.n()).done;){var p=u.value,d=JSON.parse(JSON.stringify(t.cards[p.index])),y=o(JSON.parse(JSON.stringify(p)),d);if(y.cardControlAnalyticsParams=JSON.parse(JSON.stringify(l.cardControlAnalyticsParams)),y.analyticsParams=JSON.parse(JSON.stringify(t.analyticsParams)),"ACC"!=l.surfaceId);else if(y&&(y.hasOwnProperty("displayText")||y.hasOwnProperty("bodyCopy")||y.hasOwnProperty("ctaLabel")||y.hasOwnProperty("secondaryCTALabel")))y.hasOwnProperty("bodyCopy")&&!Number.isNaN(Number(y.bodyCopy))&&(y.order=String(y.bodyCopy)),y.hasOwnProperty("displayText")&&(y.visible="true"==String(y.displayText)?"true":"false"),y.hasOwnProperty("ctaLabel")&&"undefined"!=String(y.ctaLabel)&&(y.default=String(y.ctaLabel)),y.hasOwnProperty("secondaryCTALabel")&&"undefined"!=String(y.secondaryCTALabel)&&(y.parent=String(y.secondaryCTALabel));else if(y&&(y.hasOwnProperty("order")||y.hasOwnProperty("visible")||y.hasOwnProperty("default")||y.hasOwnProperty("parent")))y.hasOwnProperty("order")&&!Number.isNaN(Number(y.order))&&(y.order=String(y.order)),y.hasOwnProperty("visible")&&(y.visible="true"==String(y.visible)?"true":"false"),y.hasOwnProperty("default")&&"undefined"!=String(y.default)&&(y.default=String(y.default)),y.hasOwnProperty("parent")&&"undefined"!=String(y.parent)&&(y.parent=String(y.parent));else if(d&&(d.hasOwnProperty("actionURL")||d.hasOwnProperty("contentURL"))){var h=d.actionURL?d.actionURL:d.contentURL,g=e.getQueryParameterByName(h,"order");g&&!Number.isNaN(Number(g))&&(y.order=String(g));var v=e.getQueryParameterByName(h,"visible");v&&(y.visible="true"==String(v)?"true":"false");var b=e.getQueryParameterByName(h,"default");b&&"undefined"!=String(b)&&(y.default=String(b));var m=e.getQueryParameterByName(h,"parent");m&&"undefined"!=String(m)&&(y.parent=String(m))}r[l.surfaceId].push(y)}}catch(e){f.e(e)}finally{f.f()}}}catch(e){s.e(e)}finally{s.f()}}catch(e){n.a.error("ContainerUtils: Exception in parseAPSData: ".concat(e)),r={}}return n.a.info("ContainerUtils: parseAPSData(): end"),r}},{key:"parseAPSAnalyticsParams",value:function(e){n.a.info("ContainerUtils: parseAPSAnalyticsParams(): start");var t={};if(!e||"object"!==c(e)||!e.cardControl||!Array.isArray(e.cardControl))return t;try{var r,a=i(e.cardControl);try{var o=function(){var n=r.value;t[n.surfaceId]={};var a,o=i(n.containers);try{var s=function(){var e=a.value,r=JSON.parse(JSON.stringify(e.containerAnalyticsParams))||{};Object.keys(r).forEach(function(e){r[e]&&(t[n.surfaceId].hasOwnProperty(e)?t[n.surfaceId][e]="".concat(t[n.surfaceId][e],"|").concat(r[e]):t[n.surfaceId][e]=r[e])})};for(o.s();!(a=o.n()).done;)s()}catch(e){o.e(e)}finally{o.f()}var l=JSON.parse(JSON.stringify(n.cardControlAnalyticsParams))||{};Object.keys(l).forEach(function(e){t[n.surfaceId].hasOwnProperty(e)?t[n.surfaceId][e]="".concat(t[n.surfaceId][e],"|").concat(l[e]):t[n.surfaceId][e]=l[e]}),l=JSON.parse(JSON.stringify(e.analyticsParams))||{},Object.keys(l).forEach(function(e){t[n.surfaceId].hasOwnProperty(e)?t[n.surfaceId][e]="".concat(t[n.surfaceId][e],"|").concat(l[e]):t[n.surfaceId][e]=l[e]})};for(a.s();!(r=a.n()).done;)o()}catch(e){a.e(e)}finally{a.f()}}catch(e){n.a.error("ContainerUtils: Exception in parseAPSAnalyticsParams: ".concat(e)),t={}}return n.a.info("ContainerUtils: parseAPSAnalyticsParams(): end"),t}},{key:"matchPanelsData",value:function(t,r){var a=!1;try{if(t.length!=r.length)return a=!0;for(var o=0;o<t.length;++o){if(t[o].panelName!=r[o].panelName){a=!0;break}if(t[o].id!=r[o].id||t[o].version!=r[o].version||t[o].packageVersion!=r[o].packageVersion||t[o].path!=r[o].path){a=!0;break}if(t[o].panels.length!=r[o].panels.length){a=!0;break}if(t[o].panels.length>0&&e.matchPanelsData(t[o].panels,r[o].panels)){a=!0;break}}}catch(e){n.a.error("Exception in panels matchPanelsData(): ".concat(e)),a=!1}return a}},{key:"mergePanelsData",value:function(e,t,r,a,i,s,l){n.a.info("ContainerUtils: mergePanelsData(): start");var c=[],u=[],f=[];try{t&&Array.isArray(t)&&(c=JSON.parse(JSON.stringify(t))),r&&Array.isArray(r)&&r.length>0&&(c=JSON.parse(JSON.stringify(r)));for(var p=0;p<c.length;++p){for(var d=void 0,y=0;y<a.length;++y)if(a[y].containerId==c[p].containerId){d=a[y];break}d&&(d.order&&"undefined"!=String(d.order)&&(c[p].order=d.order),d.visible&&"undefined"!=String(d.visible)&&(c[p].visible=d.visible),d.parent&&"undefined"!=String(d.parent)&&("ACC"==d.parent?delete c[p].parent:c[p].parent=d.parent))}n.a.info("ContainerUtils: mergePanelsData(): APS override applied");for(var h=function e(t){for(var r=0;r<c.length;++r)if(t==c[r].panelName)return c[r].visible="true",c[r].parent&&c[r].parent!=c[r].panelName&&e(c[r].parent),!0;return!1},g=0;g<s.length;++g)h(s[g].panelName);for(var v=function e(t){for(var r=0;r<c.length;++r)if(c[r].panelName==t)return"true"==c[r].visible?c[r].parent&&c[r].parent!=c[r].panelName?e(c[r].parent):"true":"false";return"false"},b=0;b<c.length;){var m=!0;if(c[b].visible&&"false"==c[b].visible)m=!1;else if(c[b].parent&&"false"==v(c[b].parent))m=!1;else if(0==l||"appspanel"!=String(c[b].panelName).toLowerCase())for(var S=0;S<i.length;++S)if(String(c[b].panelName).toLowerCase()==String(i[S].name).toLowerCase()&&"false"==i[S].visible){m=!1;break}if(m)++b;else{for(var w=0;w<c[b].applets.length;){var O=c[b].applets[w];if(O.mode==e||"ADS"==e&&"OldApplet"==O.type){c[b].visible="false";var P=o({},c[b],O,{panels:[]});"ADS"==e&&"OldApplet"==P.type&&P.id.length>3&&"_UI"==P.id.slice(P.id.length-3)&&(P.id="".concat(P.id.slice(0,P.id.length-3),"_BL"),P.mode="ADS"),delete P.applets,f.push(P)}++w}c.splice(b,1)}}n.a.info("ContainerUtils: mergePanelsData(): hidden panels calculated");for(var L=0;L<c.length;){for(var N=0;N<c[L].applets.length;){var A=c[L].applets[N];if(A.mode==e){var C=o({},c[L],A,{panels:[]});delete C.applets,u.push(C)}++N}++L}u.sort(function(e,t){return Number.isNaN(Number(e.order))||Number.isNaN(Number(t.order))?0:Number(e.order)-Number(t.order)});for(var J=0;J<u.length;++J)for(var j=0;j<u.length;++j)u[j].parent==u[J].panelName&&u[J].panels.push(u[j]);for(var k=0;k<u.length;)u[k].parent?u.splice(k,1):++k}catch(e){n.a.error("Exception while merging panels data: ".concat(e)),u=[],f=[]}return n.a.info("ContainerUtils: mergePanelsData(): end"),{visiblePanels:u,hiddenPanels:f}}},{key:"parseC3Config",value:function(e,t,r){if(n.a.info("ContainerUtils: parseC3Config(): start"),e){if(e.config&&e.config.namespace)for(var o=e.config.namespace,i=0;i<o.length;i++){var s=o[i];if(s.property){var l=new Map;if(s.property.length)for(var c=0;c<s.property.length;c++){var u=s.property[c];l.set(u["@name"],u["#text"])}else{for(var f=void 0,p=0,d=Object.entries(s.property);p<d.length;p++){var y=a(d[p],2),h=y[0],g=y[1];if("@name"!=h){f=g;break}}l.set(s.property["@name"],f)}t.set(s["@name"],l)}}if(e.redirections&&e.redirections.hostRedirections&&e.redirections.hostRedirections.link)for(var v=e.redirections.hostRedirections.link,b=0;b<v.length;b++){var m=v[b];r.set(m.from,m.to)}n.a.info("ContainerUtils: parseC3Config(): end")}}},{key:"getNamespaceProperty",value:function(e,t){var r={};if(!t||!t.size)return r.value="",r;if(!e)return r.value="",r;var n=e.namespace,a=e.property;if(!n||!a)return r.value="",r;if(t&&t.get(n)){var o=t.get(n).get(a);return r.value=o,r}return""}},{key:"getRedirectedUrl",value:function(e,t){if(!t||!t.size)return"";if(!e)return"";var r=e.url;if(!r)return"";var n=t.get(r);return null!=n?n:""}},{key:"handleFESData",value:function(e,t){if(n.a.info("ContainerUtils: handleFESData(): start"),e){var r,a=i(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;switch(o["@id"]){case"ccd.apps.overrideServiceConfig":n.a.info("ContainerUtils: handleFESData(): start ",o["@state"]),"DISABLED"==o["@state"]?t.set(o["@id"],"false"):t.set(o["@id"],"true")}}}catch(e){a.e(e)}finally{a.f()}}}},{key:"getFESData",value:function(e,t){n.a.info("ContainerUtils: getFESData(): start ",t);var r="";switch(t){case"ccd.apps.overrideServiceConfig":r=e&&void 0!==e.get(t)?e.get(t):"true"}return r}},{key:"toArray",value:function(e){return e?(0==Array.isArray(e)&&(e=[e]),e):[]}}],(r=null)&&u(t.prototype,r),s&&u(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,r){"use strict";r.d(t,"a",function(){return d});var n=r(1),a=r(5);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,o=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===i(o)?o:String(o)),n)}var a,o}function f(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var p=function(){function e(){c(this,e)}return f(e,null,[{key:"createPanelList",value:function(t){var r,n=[],o=s(t);try{for(o.s();!(r=o.n()).done;){var i=r.value,l=new a.a(i);n.push(l),i.panels.length>0&&(l.subPanelList=e.createPanelList(i.panels))}}catch(e){o.e(e)}finally{o.f()}return n}},{key:"loadPanels",value:function(t,r){for(var a=function(t){e.allPanelsLoaded(n.a.panelList)&&setTimeout(function(){n.a.ExternalGateway.sendMessageToApplet("PanelsLoadComplete",{panels:{panel:n.a.panelListJSON}},"C3Container_BL","1.0","")},0)},o=function(e){n.a.ExternalGateway.sendMessageToApplet("PanelsLoadError",{panels:{panel:[e]}},"C3Container_BL","1.0","")},i=0;i<t.length;++i){var s=t[i];s.loadPanel(r,a,o),s.subPanelList.length>0&&e.loadPanels(s.subPanelList,locale)}}},{key:"allPanelsLoaded",value:function(t){for(var r=0;r<t.length;++r){var n=t[r];if(!n.isLoaded)return!1;if(n.subPanelList.length>0&&!e.allPanelsLoaded(n.subPanelList))return!1}return!0}},{key:"broadcastMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a={};a.message=e,a.data=t,a.targetID="*",a.targetType=r?"Applet":"*",n.a.ExternalGateway.sendMessage(a)}},{key:"broadcastMessageToAllCoreExtensions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};r.message=e,r.data=t,r.targetID="*",r.targetType="CoreExt",n.a.ExternalGateway.sendMessage(r)}}]),e}(),d=function(){function e(){c(this,e)}return f(e,null,[{key:"handleMessage",value:function(e,t){switch(e){case"LoadPanels":n.a.panelList=p.createPanelList(n.a.panelListJSON),p.loadPanels(n.a.panelList,t);break;case"UpdateUserProfile":n.a.updateUserProfile(t),p.broadcastMessage(e);break;case"InvalidateUserProfile":n.a.updateUserProfile({}),p.broadcastMessage(e);break;case"SignInComplete":n.a.updateUserProfile(t),n.a.signInStatus=!0,p.broadcastMessage(e);break;case"InitData":var r=o({},t.panelsInitData);p.broadcastMessageToAllCoreExtensions(e,r);break;case"BroadcastData":p.broadcastMessage(t.message,t.payload);break;case"UserContextData":p.broadcastMessage(e,t)}}}]),e}()},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(o=a.key,i=void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(i)?i:String(i)),a)}var o,i}r.d(t,"a",function(){return o});var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._hostObject=null,this._hostMessageHandlerFn=null}var t,r,o;return t=e,(r=[{key:"initialize",value:function(e){e&&"object"==n(e)&&(e.hostObject&&"object"==n(e.hostObject)&&(this._hostObject=e.hostObject),e.hostMessageHandlerFn&&"function"==typeof e.hostMessageHandlerFn&&(this._hostMessageHandlerFn=e.hostMessageHandlerFn))}},{key:"handleMessage",value:function(e){}},{key:"finalize",value:function(e){}},{key:"sendMessage",value:function(e){return this._hostObject&&this._hostObject.handleMessage&&"function"==typeof this._hostObject.handleMessage?this._hostObject.handleMessage(e):this._hostMessageHandlerFn?this._hostMessageHandlerFn(e):void 0}},{key:"sendMessageToJSCore",value:function(e,t){return this.sendMessage({targetType:"JSCore",message:e,data:t||{}})}},{key:"sendMessageToParent",value:function(e,t){return this.sendMessage({targetType:"Parent",message:e,data:t||{}})}},{key:"sendMessageToHost",value:function(e,t){return this.sendMessage({targetType:"Host",message:e,data:t||{}})}},{key:"sendMessageToContainer",value:function(e,t){return this.sendMessage({targetType:"Container",message:e,data:t||{}})}},{key:"sendMessageToApplet",value:function(e,t,r,n,a){return this.sendMessage({targetType:"Applet",targetID:r||"",targetVersion:n||"",targetInstanceID:a||"",message:e,data:t||{}})}}])&&a(t.prototype,r),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r(1);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===a(i)?i:String(i)),n)}var o,i}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.panelJSON=t,this.subPanelList=[],this.isLoaded=!1}var t,r,a;return t=e,(r=[{key:"loadPanel",value:function(e,t,r){var a=o({},this.panelJSON,{initData:e,statusCallback:function(e){if(e.status)this.isLoaded=!0,t(this.panelJSON);else{if(this.isLoaded=!1,"load"==e.response.errorType)for(var n=0;n<e.response.errorResourceList.length;)e.response.errorResourceList[n].status||!e.response.errorResourceList[n].isMandatory?e.response.errorResourceList.splice(n,1):(e.response.errorResourceList[n]={path:e.response.errorResourceList[n].path},++n);this.panelJSON.error=e.response,r(this.panelJSON)}}.bind(this),panels:void 0});n.a.ExternalGateway.sendMessageToJSCore("LoadModule",a)}}])&&i(t.prototype,r),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,r){e.exports=r(7)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return d});var n=r(4),a=r(0),o=r(3),i=r(1);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===s(o)?o:String(o)),n)}var a,o}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(arguments.length<3?e:r):a.value}}).apply(this,arguments)}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var a=p(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(y,n["a"]);var t,r,s,d=f(y);function y(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),e=d.call(this),a.a.info("JS Module load: ContainerBL: version: ".concat("5.11.0")),e._initDataJSON={},e}return t=y,(r=[{key:"initialize",value:function(e){c(p(y.prototype),"initialize",this).call(this,e),this._initDataJSON=e,i.a.initialize(e,this)}},{key:"handleMessage",value:function(e){switch(e.message){case"InitConfig":var t=e.data,r={};try{r=i.a.initializeConfigData(t)}catch(e){a.a.error("JSContainer_BL: ContainerBL: initializeConfigData exception: ",e)}a.a.info("JSContainer_BL: ContainerBL: initializeConfigData complete: shouldReload: ".concat(String(r.shouldReload)," , host: ").concat(JSON.stringify(r.host))),a.a.debug("JSContainer_BL: ContainerBL: initializeConfigData result: ",JSON.stringify(r));var n=null===r.shouldReload;if(r.shouldReload=String(r.shouldReload),this.sendMessage({targetType:"Applet",targetID:"C3Container_BL",targetVersion:"1.0",message:"InitConfigResponse",mainThread:"false",data:{xmldata:r}}),!n)break;return o.a.handleMessage("InitData",t),void(this._initDataJSON.initJSON&&o.a.handleMessage("LoadPanels",t.panelsInitData));case"UpdateUserProfile":var s=e.data.profileData;return void o.a.handleMessage("UpdateUserProfile",s);case"SignInComplete":var l=e.data.profileData;try{var c=document.createElement("iframe");c.src="https://connect.ffc.adobeoobe.com/cc.png?t=".concat((new Date).getTime()),c.onload=function(e){o.a.handleMessage("SignInComplete",l),a.a.info("ContainerBL_JS: Successfully loaded CC test resource"),document.body.removeChild(c)},c.onerror=function(e){o.a.handleMessage("SignInComplete",l),a.a.warn("ContainerBL_JS: Error loading CC test resource: ".concat(e.message)),document.body.removeChild(c)},document.body.appendChild(c)}catch(e){a.a.error("Exception while trying to load CC test resource.")}return;case"InvalidateUserProfile":return void o.a.handleMessage("InvalidateUserProfile",{});case"GetUserProfile":return i.a.getUserProfile();case"GetNamespaceProperty":return i.a.getNamespaceProperty(e.data);case"GetRedirectedUrl":return i.a.getRedirectedUrl(e.data);case"RefreshUserProfile":return;case"UpdateARSGuid":return void i.a.updateARSGuidInUserProfile(e.data);case"BroadcastData":var u={payload:{}};return e.data.payload&&(u.payload=e.data.payload),u.message=e.data.message,void o.a.handleMessage("BroadcastData",u);case"UserContextData":o.a.handleMessage("UserContextData",e.data)}}},{key:"finalize",value:function(e){c(p(y.prototype),"finalize",this).call(this,e)}}])&&l(t.prototype,r),s&&l(t,s),Object.defineProperty(t,"prototype",{writable:!1}),y}();window.JSContainer_BL=function(){return new d}}]);
